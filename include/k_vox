#pragma once
#include "types.cuh"

#define REGIO_PREFIX_BITS 12   // of jouw oorspronkelijke waarde

struct Kwantisatie {
    float3 bbMin;
    float3 invScale; // = 1 / voxelSize
};

__device__ __forceinline__
void kwantiseer_punt(const Vec3f& p, const Kwantisatie& Q, u32& xi, u32& yi, u32& zi)
{
    float3 rel = make_float3(
        (p.x - Q.bbMin.x) * Q.invScale.x,
        (p.y - Q.bbMin.y) * Q.invScale.y,
        (p.z - Q.bbMin.z) * Q.invScale.z);

    xi = (u32) rel.x;
    yi = (u32) rel.y;
    zi = (u32) rel.z;
}

__device__ __forceinline__
u64 morton_encode_3d(u32 x, u32 y, u32 z)
{
    return (part1by2(z) << 2) | (part1by2(y) << 1) | part1by2(x);
}

